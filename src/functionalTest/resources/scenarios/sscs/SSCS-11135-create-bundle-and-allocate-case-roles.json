
{

  "description": "create Bundle And Allocate Case Roles",

  "enabled": true,

  "jurisdiction": "SSCS",

  "caseType": "Benefit",

  "options": {

    "taskRetrievalApi": "task-management-api"

  },

  "required": {

    "credentials": {

      "key": "systemupdate"

    },

    "ccd": [

      {

        "eventId": "validAppealCreated",

        "caseData": {

          "template": "minimal-sscs-benefit-appeal.json",

          "replacements": {

          }

        }

      }

    ]

  },

  "tests": [

    {

      "request": {

        "credentials": {

          "key": "systemupdate"

        },

        "input": {

          "eventMessages": [

            {

              "destination": "RestEndpoint",

              "template": "minimal-ccd-event-message.json",

              "replacements": {

                "EventId": "createBundleAndAllocateCaseRolesRequired"

              }

            }

          ]

        }

      },

      "expectations": [

        {

          "credentials": {

            "key": "Regional-Centre-Admin"

          },

          "status": 200,

          "numberOfTasksAvailable": 1,

          "taskData": {

            "template": "minimal-task-response.json",

            "replacements": {

              "tasks": [

                {

                  "type": "createBundleAndAllocateCaseRoles",

                  "name": "Create Bundle And Allocate Case Roles",

                  "role_category": "ADMIN",

                  "minor_priority": 300,

                  "major_priority": 3000,

                  "description": "[Create a bundle in the case](/case/SSCS/Benefit/${[CASE_REFERENCE]}/trigger/createBundle)"

                }

              ]

            }

          },

          "roleData": {

            "roles": [

              {

                "role_category": "",

                "role_name": "case-allocator",

                "permissions": [ "Read,Own,Manage,Complete,Cancel,Assign,Unassign,Claim,Unclaim" ],

                "authorisations": []

              },

              {

                "role_category": "",

                "role_name": "task-supervisor",

                "permissions": [ "Read,Own,Manage,Complete,Cancel,Assign,Unassign,Claim,Unclaim" ],

                "authorisations": []

              },

              {

                "role_category": "ADMIN",

                "role_name": "Allocated-Admin-Caseworker",

                "permissions": [ "Read,Own,Claim,Unclaim,Manage,UnclaimAssign" ],

                "authorisations": []

              },

              {

                "role_category": "ADMIN",

                "role_name": "Regional-Centre-Admin",

                "permissions": [ "Read,Own,Claim,Unclaim,Manage,UnclaimAssign" ],

                "authorisations": []

              },

              {

                "role_category": "ADMIN",

                "role_name": "Regional-Centre-Team-Leader",

                "permissions": [ "Read,Own,Claim,Unclaim,Manage,UnclaimAssign,Assign,Unassign,Cancel" ],

                "authorisations": []

              }

            ]

          }

        }

      ]

    }

  ]

}
